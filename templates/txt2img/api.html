<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>txt2img-API – Gen</title>
  <link rel="stylesheet" href="/../static/mercury.css"/>
  <style>
    /* Optional: make the select look nicer */
    select#model {
      width: 100%;
      padding: 8px;
      font-size: 1em;
      border: 1px solid #444;
      border-radius: 4px;
      background: #222;
      color: #fff;
    }
  </style>
</head>
<body>

<header class="top-bar">
  <a class="back" href="/txt2img">Back</a>
  <span class="title">txt2img-API</span>
</header>

<div class="workbench">
  <aside class="panel left">
    <form id="genForm" onsubmit="generate(event)">
      <label>Prompt
        <textarea name="prompt" required placeholder="generate an image of a..."></textarea>
      </label>
      <label>Model
        <select id="model" required>
          <option disabled selected>Select a model</option>
          <option value="google/gemini-3-pro-image-preview">Gemini 3 Pro (nanobanana)</option>
          <option value="google/gemini-2.5-flash-image">Gemini 2.5</option>
          <option value="openai/gpt-5-image-mini">OpenAI gpt 5 mini</option>
          <option value="openai/gpt-5-image">OpenAI gpt 5</option>
        </select>
      </label>
      <button class="primary">Generate</button>
    </form>
    <div id="loader" class="loader hidden">Crafting visuals…</div>
  </aside>

  <section class="panel right" id="gallery">
    <p class="placeholder">Images appear here</p>
  </section>
</div>

<script>
async function generate(e){
  e.preventDefault();
  const loader = document.getElementById('loader');
  const gallery = document.getElementById('gallery');
  loader.classList.remove('hidden');
  const res = await fetch('/txt2img/api', {method:'POST', body: new FormData(e.target)});
  const data = await res.json();
  gallery.innerHTML = data.images.map(u=>`<img src="${u}">`).join('');
  loader.classList.add('hidden');
}
</script>
</body>
</html>